# 📁 项目路径说明

## 🎯 项目根目录

```
H:\momo-ruanjiansheji\axs_html\deploy-package\vue_xs\
```

---

## 📂 目录结构

```
H:\momo-ruanjiansheji\axs_html\deploy-package\
│
├── data/                          # 旧系统数据（用于迁移）
│   ├── users.json
│   ├── novels.json
│   └── comments.json
│
├── vue_xs/                        # 🆕 新项目根目录
│   │
│   ├── frontend/                  # 前端项目
│   │   ├── src/                   # 源代码
│   │   │   ├── api/              # API调用
│   │   │   ├── assets/           # 静态资源
│   │   │   ├── components/       # 组件
│   │   │   ├── pages/            # 页面
│   │   │   ├── router/           # 路由
│   │   │   ├── stores/           # 状态管理
│   │   │   ├── types/            # 类型定义
│   │   │   ├── utils/            # 工具函数
│   │   │   ├── App.vue           # 根组件
│   │   │   └── main.ts           # 入口文件
│   │   │
│   │   ├── public/               # 公共资源
│   │   ├── index.html            # HTML模板
│   │   ├── package.json          # 依赖配置
│   │   ├── vite.config.ts        # Vite配置
│   │   ├── tsconfig.json         # TypeScript配置
│   │   ├── tailwind.config.js    # Tailwind配置
│   │   └── .env.development      # 开发环境变量
│   │
│   ├── backend/                   # 后端项目
│   │   ├── src/                   # 源代码
│   │   │   ├── controllers/      # 控制器
│   │   │   ├── services/         # 服务层
│   │   │   ├── routes/           # 路由
│   │   │   ├── middlewares/      # 中间件
│   │   │   ├── utils/            # 工具函数
│   │   │   ├── types/            # 类型定义
│   │   │   └── server.ts         # 服务器入口
│   │   │
│   │   ├── prisma/               # Prisma ORM
│   │   │   ├── schema.prisma     # 数据库Schema
│   │   │   └── migrations/       # 数据库迁移
│   │   │
│   │   ├── scripts/              # 工具脚本
│   │   │   └── migrate-data.ts   # 数据迁移脚本
│   │   │
│   │   ├── tests/                # 测试文件
│   │   ├── package.json          # 依赖配置
│   │   ├── tsconfig.json         # TypeScript配置
│   │   ├── .env                  # 环境变量
│   │   └── ecosystem.config.js   # PM2配置
│   │
│   ├── docs/                      # 项目文档
│   ├── scripts/                   # 项目脚本
│   ├── README.md                  # 项目说明
│   └── 快速启动.bat              # 快速启动脚本
│
└── 文档/                          # 所有开发文档
    ├── 🚀立即开始_今天就能动手.md
    ├── 三人团队详细任务分配表.md
    ├── 三人团队重构实施计划_宝塔MySQL版.md
    ├── 本地开发实施指南_XAMPP版.md
    └── ...
```

---

## 🗂️ 路径对应关系

### 开发环境（本地）

```
项目根目录:
H:\momo-ruanjiansheji\axs_html\deploy-package\vue_xs\

前端开发:
H:\momo-ruanjiansheji\axs_html\deploy-package\vue_xs\frontend\
启动: cd frontend && npm run dev
访问: http://localhost:5188

后端开发:
H:\momo-ruanjiansheji\axs_html\deploy-package\vue_xs\backend\
启动: cd backend && npm run dev
访问: http://localhost:3000

旧数据位置（用于迁移）:
H:\momo-ruanjiansheji\axs_html\deploy-package\data\
```

### 生产环境（服务器）

```
项目根目录:
/www/wwwroot/xs.momofx.cn/

前端静态文件:
/www/wwwroot/xs.momofx.cn/frontend/
(由Nginx直接服务)

后端API:
/www/wwwroot/xs.momofx.cn/backend/
(由PM2守护进程运行)
```

---

## 🔧 环境变量配置

### 前端环境变量

**开发环境 `frontend/.env.development`：**
```env
# 后端API地址（本地开发）
VITE_API_BASE_URL=http://localhost:3000/api
```

**生产环境 `frontend/.env.production`：**
```env
# 后端API地址（服务器）
VITE_API_BASE_URL=https://xs.momofx.cn/api
```

### 后端环境变量

**开发环境 `backend/.env`：**
```env
NODE_ENV=development
PORT=3000

# 本地XAMPP的MySQL
DATABASE_URL="mysql://toefl_user:mojz168168@localhost:3306/momo_novel_db"

JWT_SECRET=dev-secret-key-12345678
```

**生产环境 `backend/.env.production`：**
```env
NODE_ENV=production
PORT=3000

# 服务器的MySQL
DATABASE_URL="mysql://toefl_user:mojz168168@localhost:3306/momo_novel_db"

JWT_SECRET=生产环境的超强密钥
```

---

## 📝 数据迁移路径

### 迁移脚本中的路径

```typescript
// backend/scripts/migrate-data.ts

// 旧数据位置（相对于 vue_xs/backend/scripts/）
const oldDataPath = '../../data'

// 等同于：
// H:\momo-ruanjiansheji\axs_html\deploy-package\data\

const usersFile = fs.readFileSync(
  path.join(__dirname, oldDataPath, 'users.json'), 
  'utf-8'
)
const novelsFile = fs.readFileSync(
  path.join(__dirname, oldDataPath, 'novels.json'), 
  'utf-8'
)
const commentsFile = fs.readFileSync(
  path.join(__dirname, oldDataPath, 'comments.json'), 
  'utf-8'
)
```

---

## 🚀 快速启动命令

### Windows PowerShell

```powershell
# 进入项目根目录
cd H:\momo-ruanjiansheji\axs_html\deploy-package\vue_xs

# 启动前端
cd frontend
npm run dev

# 启动后端（新开一个终端）
cd backend
npm run dev

# 或使用快速启动脚本
.\快速启动.bat
```

### Git Bash（如果安装了）

```bash
# 进入项目根目录
cd /h/momo-ruanjiansheji/axs_html/deploy-package/vue_xs

# 启动前端
cd frontend && npm run dev

# 启动后端
cd backend && npm run dev
```

---

## 📦 打包部署路径

### 本地打包

```powershell
# 前端打包
cd H:\momo-ruanjiansheji\axs_html\deploy-package\vue_xs\frontend
npm run build
# 生成: frontend\dist\

# 后端打包
cd H:\momo-ruanjiansheji\axs_html\deploy-package\vue_xs\backend
npm run build
# 生成: backend\dist\
```

### 上传到服务器

```
本地路径 → 服务器路径

H:\...\vue_xs\frontend\dist\
    → /www/wwwroot/xs.momofx.cn/frontend/

H:\...\vue_xs\backend\dist\
    → /www/wwwroot/xs.momofx.cn/backend/dist/

H:\...\vue_xs\backend\prisma\
    → /www/wwwroot/xs.momofx.cn/backend/prisma/
```

---

## ✅ 检查清单

### 开始开发前

- [ ] 项目目录已创建：`H:\...\vue_xs\`
- [ ] XAMPP的MySQL正在运行
- [ ] 数据库已创建：`momo_novel_db`
- [ ] Node.js已安装（`node -v`）
- [ ] Git已安装（`git --version`）
- [ ] VS Code已安装

### 前端初始化后

- [ ] `frontend\package.json` 存在
- [ ] `frontend\node_modules\` 存在
- [ ] `npm run dev` 可以启动
- [ ] http://localhost:5188 可访问

### 后端初始化后

- [ ] `backend\.env` 已配置
- [ ] `backend\prisma\schema.prisma` 已编写
- [ ] 数据库表已创建（`npx prisma db push`）
- [ ] `npm run dev` 可以启动
- [ ] http://localhost:3000/api/health 返回ok

---

## 🆘 常见问题

### Q: 找不到项目目录？

```powershell
# 确保在正确的路径
cd H:\momo-ruanjiansheji\axs_html\deploy-package
dir vue_xs
# 应该能看到 vue_xs 文件夹
```

### Q: 数据迁移找不到文件？

```
确保旧数据在：
H:\momo-ruanjiansheji\axs_html\deploy-package\data\
  ├── users.json
  ├── novels.json
  └── comments.json

迁移脚本会从这里读取数据
```

### Q: VS Code在哪打开？

```powershell
cd H:\momo-ruanjiansheji\axs_html\deploy-package\vue_xs
code .
```

---

**项目启动成功后，参考《三人团队详细任务分配表.md》开始开发！** 🚀

