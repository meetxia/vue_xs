# ğŸ§ª æµ‹è¯•æ–‡æ¡£

## æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ setup.ts                    # æµ‹è¯•ç¯å¢ƒè®¾ç½®
â”œâ”€â”€ unit/                       # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ password.test.ts
â”‚   â”‚   â”œâ”€â”€ jwt.test.ts
â”‚   â”‚   â””â”€â”€ validator.test.ts
â”‚   â””â”€â”€ services/               # æœåŠ¡å±‚æµ‹è¯•
â”‚       â”œâ”€â”€ auth.service.test.ts
â”‚       â”œâ”€â”€ novel.service.test.ts
â”‚       â”œâ”€â”€ comment.service.test.ts
â”‚       â””â”€â”€ user.service.test.ts
â”œâ”€â”€ integration/                # é›†æˆæµ‹è¯•ï¼ˆå¾…å¼€å‘ï¼‰
â””â”€â”€ api-test.md                 # APIæ‰‹åŠ¨æµ‹è¯•æ–‡æ¡£
```

## è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
npm test
```

### è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶

```bash
npm test -- password.test.ts
```

### æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡

```bash
npm test -- --coverage
```

### ä½¿ç”¨UIç•Œé¢è¿è¡Œæµ‹è¯•

```bash
npm run test:ui
```

## æµ‹è¯•è¦†ç›–

### å·¥å…·å‡½æ•°ï¼ˆUtilsï¼‰âœ…

- **password.ts** - å¯†ç å·¥å…·
  - âœ… å¯†ç åŠ å¯†
  - âœ… å¯†ç éªŒè¯
  - âœ… å¯†ç å¼ºåº¦æ ¡éªŒ

- **jwt.ts** - JWTå·¥å…·
  - âœ… Tokenç”Ÿæˆ
  - âœ… TokenéªŒè¯
  - âœ… Tokenè§£æ

- **validator.ts** - éªŒè¯å·¥å…·
  - âœ… é‚®ç®±éªŒè¯
  - âœ… ç”¨æˆ·åéªŒè¯
  - âœ… è¾“å…¥æ¸…ç†

### æœåŠ¡å±‚ï¼ˆServicesï¼‰âœ…

- **AuthService** - è®¤è¯æœåŠ¡
  - âœ… ç”¨æˆ·æ³¨å†Œ
  - âœ… ç”¨æˆ·ç™»å½•
  - âœ… è·å–å½“å‰ç”¨æˆ·

- **NovelService** - å°è¯´æœåŠ¡
  - âœ… åˆ›å»ºå°è¯´
  - âœ… è·å–åˆ—è¡¨
  - âœ… è·å–è¯¦æƒ…
  - âœ… æ›´æ–°å°è¯´
  - âœ… åˆ é™¤å°è¯´
  - âœ… ç‚¹èµ/å–æ¶ˆç‚¹èµ
  - âœ… æ”¶è—/å–æ¶ˆæ”¶è—

- **CommentService** - è¯„è®ºæœåŠ¡
  - âœ… åˆ›å»ºè¯„è®º
  - âœ… è·å–è¯„è®ºåˆ—è¡¨
  - âœ… åˆ é™¤è¯„è®º
  - âœ… è·å–ç”¨æˆ·è¯„è®º

- **UserService** - ç”¨æˆ·æœåŠ¡
  - âœ… è·å–ç”¨æˆ·ä¿¡æ¯
  - âœ… æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  - âœ… ä¿®æ”¹å¯†ç 
  - âœ… è·å–æ”¶è—åˆ—è¡¨

## æµ‹è¯•ç»Ÿè®¡

```
å•å…ƒæµ‹è¯•æ€»æ•°: 60+
æµ‹è¯•è¦†ç›–ç‡: 80%+
é€šè¿‡ç‡: 100%
```

## æµ‹è¯•æŠ€æœ¯æ ˆ

- **Vitest** - æµ‹è¯•æ¡†æ¶
- **@prisma/client** - æ•°æ®åº“Mock
- **vi.mock()** - MockåŠŸèƒ½

## æ³¨æ„äº‹é¡¹

1. æ‰€æœ‰æœåŠ¡å±‚æµ‹è¯•éƒ½ä½¿ç”¨Mockçš„Prisma Client
2. ä¸è¿æ¥çœŸå®æ•°æ®åº“
3. æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç›¸äº’ç‹¬ç«‹
4. ä½¿ç”¨`beforeEach`æ¸…ç†MockçŠ¶æ€

## åç»­è®¡åˆ’

- [ ] é›†æˆæµ‹è¯•ï¼ˆAPIç«¯åˆ°ç«¯æµ‹è¯•ï¼‰
- [ ] E2Eæµ‹è¯•ï¼ˆPlaywrightï¼‰
- [ ] æ€§èƒ½æµ‹è¯•ï¼ˆå‹åŠ›æµ‹è¯•ï¼‰
- [ ] å®‰å…¨æµ‹è¯•
